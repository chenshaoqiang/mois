!function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n=window.webpackJsonp;window.webpackJsonp=function(o,p){for(var c,l,s=0,i=[];s<o.length;s++)l=o[s],a[l]&&i.push.apply(i,a[l]),a[l]=0;for(c in p)Object.prototype.hasOwnProperty.call(p,c)&&(e[c]=p[c]);for(n&&n(o,p);i.length;)i.shift().call(null,t);if(p[0])return r[0]=0,t(0)};var r={},a={0:0};t.e=function(e,n){if(0===a[e])return n.call(null,t);if(void 0!==a[e])a[e].push(n);else{a[e]=[n];var r=document.getElementsByTagName("head")[0],o=document.createElement("script");o.type="text/javascript",o.charset="utf-8",o.async=!0,o.src=t.p+""+e+"."+({1:"index"}[e]||e)+".js?9556277449114b2158ec-"+{1:"0674008949ee803f92e7"}[e],r.appendChild(o)}},t.m=e,t.c=r,t.p=""}([]);webpackJsonp([1,0],[function(e,n){function t(){function e(e){e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY,n(e)}function n(e){b=[],$(".newElem").remove(),x.x=e.clientX/window.innerWidth*2-1,x.y=2*-(e.clientY/window.innerHeight)+1,y.setFromCamera(x,p);var n=y.intersectObjects([l]);if(r&&u.remove(r),c=null,n.length>0){var t=[];t.push(new THREE.Vector3(0,0,0)),t.push(n[0].point),c=n[0].point;var a=new THREE.Mesh(new THREE.SphereGeometry(.5),new THREE.MeshBasicMaterial({color:16711680}));a.position.copy(c);var s=document.createElement("div");s.className="newElem",s.style.position="absolute",s.style.fontSize="0";var d=document.createElement("button");d.className="btnStyle",d.innerHTML="ok",s.appendChild(d);var m=document.createElement("input");m.className="divStyle spanFont",m.autofocus="autofocus",m.placeholder="输入评论",m.style.position="absolute",m.style.width="0.5rem",s.appendChild(m),a.nodeElem=s,m.addEventListener("keydown",function(e){13==e.keyCode&&(null==this.value||""==this.value||void 0==this.value?(b=[],document.body.removeChild(this),console.log("回车:",this.value)):console.log("提交"))}),a.updateTag=function(){if(o(this,p))""==this.nodeElem.value||void 0==this.nodeElem.value?(b=[],$(".newElem").remove()):this.nodeElem.style.display="none";else{this.nodeElem.style.display="block";var e=i(this,p);this.nodeElem.style.left=e.x+"px",this.nodeElem.style.top=e.y+"px"}},a.updateTag(),document.body.appendChild(s),b.push(a)}}function t(){H.forEach(function(e){e.updateTag()}),b.forEach(function(e){e.updateTag()}),requestAnimationFrame(t);var e=window.innerWidth,n=window.innerHeight;p.aspect=e/n,p.updateProjectionMatrix(),m.setSize(e,n),m.setClearColor(16777215),w.setSize(e,n),v?E.update():void 0,g?90==window.orientation||window.orientation==-90?(w.render(u,p),$(".turnIcon").hide()):($(".turnIcon").show(),m.render(u,p)):($(".turnIcon").hide(),m.render(u,p))}u=new THREE.Scene,u.background=new THREE.Color(16777215),p=new THREE.PerspectiveCamera(f,window.innerWidth/window.innerHeight,1,1e3),p.target=new THREE.Vector3(0,0,0),p.position.set(0,0,0),p.lookAt(u.position),u.add(p),m=new THREE.WebGLRenderer,m.setClearColor(16777215,1),m.setPixelRatio(window.devicePixelRatio),m.setSize(window.innerWidth,window.innerHeight),h=m.domElement,document.getElementById("wrap").appendChild(h),$(".loading").hide(),$("#wrap").show(),w=new THREE.StereoEffect(m),E=new THREE.OrbitControls(p,m.domElement),E.target.set(p.position.x+.01,p.position.y,p.position.z),E.pan(20,20),E.minDistance=1,E.maxDistance=280,l=new THREE.Mesh(new THREE.SphereGeometry(100,60,60),new THREE.MeshBasicMaterial({map:THREE.ImageUtils.loadTexture("img/720_3.jpg"),transparent:!0,side:THREE.DoubleSide})),l.scale.x=-1,u.add(l);var r,c,d,y=new THREE.Raycaster,x=new THREE.Vector3;window.addEventListener("deviceorientation",s,!0),window.addEventListener("resize",a,!1),$(document).longPress(function(n){d=Math.floor(100*p.position.x)/100,setTimeout(function(){R<2&&d==Math.floor(100*p.position.x)/100?e(n):(b=[],$(".newElem").remove())},1500)}),t()}function o(e,n){var t=new THREE.Frustum,o=new THREE.Matrix4;return o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),t.setFromMatrix(o),!t.intersectsObject(e)}function i(e,n){var t=new THREE.Vector3,o=.5*window.innerWidth,i=.5*window.innerHeight;return e.updateMatrixWorld(),t.setFromMatrixPosition(e.matrixWorld),t.project(n),t.x=t.x*o+o,t.y=-(t.y*i)+i,{x:t.x,y:t.y}}function r(e){if(H=[],$("span.divStyle").remove(),e.length>0)for(var n=0;n<e.length;n++){var t={x:e[n].x,y:e[n].y,z:e[n].z},r=[];r.push(new THREE.Vector3(0,0,0)),r.push(t);var a=new THREE.Mesh(new THREE.SphereGeometry(.5),new THREE.MeshBasicMaterial({color:16711680}));a.position.copy(t);var s=document.createElement("span");s.className="divStyle spanFont",s.style.position="absolute",s.innerHTML=e[n].content,a.nodeElem=s,a.updateTag=function(){if(o(this,p))this.nodeElem.style.display="none";else{this.nodeElem.style.display="block";var e=i(this,p);this.nodeElem.style.left=e.x+"px",this.nodeElem.style.top=e.y+"px"}},a.updateTag(),H.push(a),document.body.appendChild(s)}}function a(){c(),p.aspect=window.innerWidth/window.innerHeight,p.updateProjectionMatrix(),m.setSize(window.innerWidth,window.innerHeight)}function s(e){E=new THREE.DeviceOrientationControls(p,!0),E.connect(),E.update(),window.removeEventListener("deviceorientation",s,!0)}function c(){var e;e=document.documentElement.clientWidth>360?360:document.documentElement.clientWidth,document.documentElement.style.fontSize=e/3.6+"px"}function d(){y?(r(P),$("#comment").attr("class","icon_bg comment open"),$("#comment p").attr("class","font_y")):(r([]),$("#comment").attr("class","icon_bg comment close"),$("#comment p").attr("class","font_w"))}var l,u,p,m,w,h,E,f=70,y=!1,v=!1,g=!1,x=!1,T=!0,H=[],b=[],R=0,M=!1,P=[{x:84.48636678589156,y:-44.32722918299939,z:29.618319423601037,content:"真好看！"},{x:92.55871605138113,y:-34.08448218167772,z:-15.537561493294982,content:"这是谁拍的啊，真美！"},{x:98.2711850057156,y:2.036200879772982,z:17.569038284042893,content:"效果不错，我也想试试！"},{x:28.2711850057156,y:-34.08448218167772,z:37.56903828404289,content:"蓝天白云，风光无限。"},{x:48.2711850057156,y:-44.32722918299939,z:-17.569038284042893,content:"碧海涛涛"},{x:158.2711850057156,y:52.036200879772984,z:7.569038284042893,content:"此处适合养老！"}],S={versions:function(){var e=navigator.userAgent;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&e.indexOf("KHTML")==-1,mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:e.indexOf("Safari")==-1,weixin:e.indexOf("MicroMessenger")>-1,qq:" QQ"==e.match(/\sQQ/i)}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};$.fn.longPress=function(e){for(var n=void 0,t=this,o=0;o<t.length;o++)t[o].addEventListener("touchstart",function(t){function o(n){return function(){e(n)}}R=t.touches.length,n=setTimeout(o(t),1e3)},!1),t[o].addEventListener("touchend",function(){clearTimeout(n)},!1)},(S.versions.mobile||S.versions.android||S.versions.ios)&&(/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?(M=!0,S.versions.qq&&$("#turnIcon").text("亲，检测到您正使用iphoneQQ，请移驾Safari浏览器中获取cardboard体验！")):/(Android)/i.test(navigator.userAgent)),t(),$("#gyro").on("click",function(e){e.stopPropagation(),v=!v,v?($("#gyro").attr("class","gyro_icon open"),$("#gyFont").attr("class","font_y").text("陀螺仪-开")):($("#gyro").attr("class","gyro_icon close"),$("#gyFont").attr("class","font_w").text("陀螺仪-关"))}),$("#eye").on("click",function(e){e.stopPropagation(),x=!x,x?($("#eye").attr("class","eye_icon open"),$("#eyeFont").attr("class","font_y").text("鱼眼-开")):($("#eye").attr("class","eye_icon close"),$("#eyeFont").attr("class","font_w").text("鱼眼-关"))}),$("#vrIcon").on("click",function(e){e.stopPropagation(),g=!g,g&&(y=!1,d(),S.versions.weixin||$(document).fullScreen(!0),$(".exitIcon").show(),$("#info").hide(),v=!0,$("#gyro").attr("class","gyro_icon open").hide(),$("#gyFont").attr("class","font_y").text("陀螺仪-开"))}),$(".exitIcon").on("click",function(e){e.stopPropagation(),g=!g,g?void 0:($(".exitIcon").hide(),$("#info").show(),$("#gyro").show())}),$("#down").on("click",function(e){e.stopPropagation(),S.versions.mobile&&S.versions.android?window.location.href="https://www.baidu.com/":S.versions.mobile&&S.versions.ios&&(window.location.href="https://www.baidu.com/")}),$("#comment").on("click",function(e){e.stopPropagation(),y=!y,d()}),$("#praise").on("click",function(e){e.stopPropagation()}),$("body").on("click",function(e){e.preventDefault(),T=!T,g?$("#info").hide():T?$("#info").show():$("#info").hide()})}]);